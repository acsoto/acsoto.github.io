<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>Tag: Swift - SOTO-BLOG</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="SOTO-BLOG"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="SOTO-BLOG"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="SOTO的博客"><meta property="og:type" content="blog"><meta property="og:title" content="SOTO-BLOG"><meta property="og:url" content="http://atksoto.com/"><meta property="og:site_name" content="SOTO-BLOG"><meta property="og:description" content="SOTO的博客"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://atksoto.com/img/og_image.png"><meta property="article:author" content="soto"><meta property="article:tag" content="随想"><meta property="article:tag" content="编程"><meta property="article:tag" content="生活"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://atksoto.com"},"headline":"SOTO-BLOG","image":["http://atksoto.com/img/og_image.png"],"author":{"@type":"Person","name":"soto"},"publisher":{"@type":"Organization","name":"SOTO-BLOG","logo":{"@type":"ImageObject","url":"http://atksoto.com/img/logo.svg"}},"description":"SOTO的博客"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="SOTO-BLOG" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">Tags</a></li><li class="is-active"><a href="#" aria-current="page">Swift</a></li></ul></nav></div></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/11/28/IoTMonitor/"><img class="fill" src="https://tva1.sinaimg.cn/large/008i3skNly1gwuaqehi6ej30lg0eggmc.jpg" alt="IoTMonitor"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-11-27T18:54:12.000Z" title="2021/11/28 上午2:54:12">2021-11-28</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-12-05T06:05:46.267Z" title="2021/12/5 下午2:05:46">2021-12-05</time></span><span class="level-item">4 minutes read (About 623 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/11/28/IoTMonitor/">IoTMonitor</a></h1><div class="content"><h1 id="IoTMonitor"><a href="#IoTMonitor" class="headerlink" title="IoTMonitor"></a>IoTMonitor</h1><p>用于展示IoT课程开发板的相关信息并进行控制  </p>
<p>可以通过调用我们部署的服务器api及时获取开发板的温湿度数据，也可以发送开关电机的指令，并且可以设置温湿度超过某阈值后报警，同时有历史记录来提供任意时间段内好看的温湿度曲线  </p>
<p><img src="http://pic.mcatk.com/soto-pictures/2021-12/IoTMonitor%E5%B1%95%E7%A4%BAgif.gif">  </p>
<h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gwuux5q5zhj30v90u0wgv.jpg">  </p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="主页面"><a href="#主页面" class="headerlink" title="主页面"></a>主页面</h3><p>分为三个部分：设备状态，历史记录，设置  </p>
<p>UI整体使用卡片式扁平设计  </p>
<h4 id="设备状态"><a href="#设备状态" class="headerlink" title="设备状态"></a>设备状态</h4><p>刷新按钮和更新温湿度数据，温湿度可以显示此时设备的温湿度传感器信息，打开电机和关闭电机功能用于控制控制板马达  </p>
<p>其中，温湿度会每秒自动进行更新，2位小数点保留  </p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gwuv4m8stbj30zu0u0gmq.jpg">  </p>
<h4 id="历史记录"><a href="#历史记录" class="headerlink" title="历史记录"></a>历史记录</h4><p>通过DatePicker选择起止时间，再点击获取，即可得到此段时间内的温湿度曲线，触摸曲线还可以动态显示任意一点的数值（此处使用了ChartView库）  </p>
<p>默认显示2天前到现在的曲线，第一次打开app时会同步一次  </p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gwuv6rhzk8j310g0u0jsq.jpg">  </p>
<h4 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h4><p>在设置页面，通过选择器选择阈值后点击保存，当温度高于此阈值时，开发板电机将会转动  </p>
<p>同时，打开app后每次阈值的设置会被记录，以便查看设置情况  </p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNly1gwuvd7193mj30zu0u0752.jpg">  </p>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><ul>
<li>实时显示开发板传感器温湿度  </li>
<li>实时控制开发板电机马达转动与否  </li>
<li>获取任意时间段开发板传感器温湿度历史曲线  </li>
<li>通过设置过热阈值，当温度超过此值，进行报警  </li>
<li>后台实时更新  </li>
</ul>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>该app主要通过HTTP GET和POST请求像我们的服务器后端发送请求，后端通过电信平台的api调用来发送相关指令，电信平台再把指令下达到开发板，来实现app与开发板的交互  </p>
<p>该app的UI其中一部分复用了我之前的项目<a target="_blank" rel="noopener" href="https://github.com/acsoto/Memo">Memo</a>的代码</p>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2021/10/28/Memo/README/"><img class="fill" src="https://tva1.sinaimg.cn/large/008i3skNly1gwv08ty64aj31340m4761.jpg" alt="Memo"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2021-10-28T09:29:00.000Z" title="2021/10/28 下午5:29:00">2021-10-28</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-12-05T06:05:45.958Z" title="2021/12/5 下午2:05:45">2021-12-05</time></span><span class="level-item">9 minutes read (About 1378 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/10/28/Memo/README/">Memo</a></h1><div class="content"><h1 id="Memo"><a href="#Memo" class="headerlink" title="Memo"></a>Memo</h1><p>Memo用于随时记录，记录生活中的某一刻，记录今天的心情，或是记录看过的一部电影，一本书，留下自己此时的感想，并在自己最爱的电影或书籍的二刷三刷后再次记录下时间和新的想法…</p>
<p>灵感来源于豆瓣，比起豆瓣的功能多出的个人需求为：需要一个简洁没有过量冗余信息的片单和书单记录软件，记录二刷，三刷的时间，以及想要随时记录每一天，并且在几年后回顾那年今日，留一些感动与感慨，让每一天都值得被纪念，故开发此软件。</p>
<h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><p><img src="README/image-20211120173053786.png"></p>
<p>（介绍及短评摘自豆瓣，侵删）</p>
<p><img src="README/008i3skNly1gwlr5i3osjj30u010ujtt.jpg"></p>
<p>Mac, iPad适配</p>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h3 id="主页面"><a href="#主页面" class="headerlink" title="主页面"></a>主页面</h3><p>主界面分为3个标签：主页，电影，书籍</p>
<h5 id="主页"><a href="#主页" class="headerlink" title="主页"></a>主页</h5><p><img src="README/008i3skNly1gwlqj9g2ltj30pi0tkq5a.jpg"></p>
<p><img src="README/008i3skNly1gwlqj9pbc4j30pk0vowg3.jpg"></p>
<h5 id="电影"><a href="#电影" class="headerlink" title="电影"></a>电影</h5><p>这里是你看过的电影片单，你可以随时看到你标记过的所有电影，以及在任何时候添加一个新的电影进入你的片单</p>
<p>进入某条电影，如果你输入的电影在数据库之中（数据来自豆瓣，侵删），你就可以看到关于电影的介绍：演员，导演，豆瓣评分，类别，介绍等，以及最重要的，在最下方，看到你第一次观看的时间以及感想</p>
<p>当然，点击此方框，你可以进入到第二次标记的页面，记录下你的第二次观影以及新的感想</p>
<p><img src="README/008i3skNly1gwlr3yyccmj30u00yfdi5.jpg"></p>
<p><img src="README/008i3skNly1gwuznrfz7oj30u00xmju5.jpg"></p>
<h5 id="书籍"><a href="#书籍" class="headerlink" title="书籍"></a>书籍</h5><p>类似电影，这里是你的书单，你可以添加你看过的书籍，并且记录第n次阅读的体验，相信每一次阅读，都会发现不少新东西</p>
<p><img src="README/008i3skNly1gwlr1ixi5pj30u010gmys.jpg"></p>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><ul>
<li>标记某一天的感受</li>
<li>标记某本电影，某本书</li>
<li>多次标记某电影和书的观看时间和感受</li>
<li>自动展示电影和书籍的相关图片与简介</li>
<li>图文并茂的主页卡片展示设计</li>
<li>在主页展示进一个月看过的电影</li>
<li>在主页展示今天以及那年今日的感想</li>
</ul>
<h2 id="架构以及实现"><a href="#架构以及实现" class="headerlink" title="架构以及实现"></a>架构以及实现</h2><p>源代码文件共25个</p>
<p>主要分为三个部分：Controller Model Views</p>
<p><img src="README/008i3skNly1gwuz8sdizwj306r0kx3z9.jpg" alt="image-20211027232454144"></p>
<h4 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h4><p>一些静态函数，实现点击界面按钮后的某些后端反应以及后端用到的函数，如图像获取，日期格式化，Mark筛选等</p>
<p>其中图片的读取使用了异步加载url的方式，如果url没有解析成功将不会显示图片</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageLoader</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> didChange <span class="operator">=</span> <span class="type">PassthroughSubject</span>&lt;<span class="type">Data</span>, <span class="type">Never</span>&gt;()</span><br><span class="line">    <span class="keyword">var</span> data <span class="operator">=</span> <span class="type">Data</span>() &#123;</span><br><span class="line">        <span class="keyword">didSet</span> &#123;</span><br><span class="line">            didChange.send(data)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">init</span>(<span class="params">urlString</span>: <span class="type">String</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> url <span class="operator">=</span> <span class="type">URL</span>(string: urlString) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> task <span class="operator">=</span> <span class="type">URLSession</span>.shared.dataTask(with: url) &#123; (data, response, error) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> data <span class="operator">=</span> data <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                <span class="keyword">self</span>.data <span class="operator">=</span> data</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        task.resume()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h4><p>主要用到的对象为Mark：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mark</span>: <span class="title">Codable</span>, <span class="title">Identifiable</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> index:<span class="type">Int</span> <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">    <span class="keyword">var</span> type:<span class="type">ModelType</span> <span class="operator">=</span> <span class="type">ModelType</span>.<span class="type">NONE</span></span><br><span class="line">    <span class="keyword">var</span> name <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">var</span> dates: [<span class="type">Date</span>] <span class="operator">=</span> []</span><br><span class="line">    <span class="keyword">var</span> feeling <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">init</span>(<span class="params">index</span>: <span class="type">Int</span>,<span class="params">type</span>:<span class="type">ModelType</span>, <span class="params">name</span>:<span class="type">String</span>, <span class="params">date</span>:<span class="type">Date</span>, <span class="params">feeling</span>:<span class="type">String</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">self</span>.index <span class="operator">=</span> index</span><br><span class="line">        <span class="keyword">self</span>.type <span class="operator">=</span> type</span><br><span class="line">        <span class="keyword">self</span>.name <span class="operator">=</span> name</span><br><span class="line">        <span class="keyword">self</span>.dates.append(date)</span><br><span class="line">        <span class="keyword">self</span>.feeling <span class="operator">=</span> feeling</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Movie, Book 为电影和书籍的简介，不进行重复的展示</p>
<p>他们遵循MarkableObject协议，用于在展示Mark详情时读取object后再作类型判断</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Movie</span>: <span class="title">Hashable</span>, <span class="title">Codable</span>, <span class="title">Identifiable</span>, <span class="title">MarkableObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> id: <span class="type">String</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span></span><br><span class="line">		<span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ModelData负责数据存储的任务</p>
<p>用到了自带的UserDefaults.standard存储数据</p>
<p>movies和books分别为电影和书籍数据集，内置在app中</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">ModelData</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> moviesDict <span class="operator">=</span> getMoviesDict(movies: load(<span class="string">&quot;movies.json&quot;</span>))</span><br><span class="line">    <span class="keyword">var</span> booksDict <span class="operator">=</span> getBooksDict(books: load(<span class="string">&quot;books.json&quot;</span>))</span><br><span class="line">    <span class="meta">@Published</span> <span class="keyword">var</span> marks: [<span class="type">Mark</span>] <span class="operator">=</span> []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">init</span>()</span> &#123;</span><br><span class="line">        loadMarks()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">loadMarks</span>()</span> &#123;</span><br><span class="line">        marks <span class="operator">=</span> <span class="type">UserDefaults</span>.standard.object(([<span class="type">Mark</span>]).<span class="keyword">self</span>, with: <span class="string">&quot;Marks&quot;</span>) <span class="operator">??</span> []</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">saveMarks</span>()</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> standard <span class="operator">=</span> <span class="type">UserDefaults</span>.standard</span><br><span class="line">        standard.set(object: marks, forKey: <span class="string">&quot;Marks&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ModelType为枚举类型，用于Mark类型判断</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">ModelType</span>: <span class="title">String</span>, <span class="title">Codable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">NONE</span> <span class="operator">=</span> <span class="string">&quot;无&quot;</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">MOVIE</span> <span class="operator">=</span> <span class="string">&quot;电影&quot;</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">BOOK</span> <span class="operator">=</span> <span class="string">&quot;书籍&quot;</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">DAY</span> <span class="operator">=</span> <span class="string">&quot;今天&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Views"><a href="#Views" class="headerlink" title="Views"></a>Views</h4><p>界面UI</p>
<p>用到了environmentObject来同步各个界面的数据</p>
<p>父界面给子界面传递@Binding的变量，子界面拿到引用直接演示和修改，不会出现数据不同步的问题</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@main</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MemoApp</span>: <span class="title">App</span> </span>&#123;</span><br><span class="line">    <span class="meta">@StateObject</span> <span class="keyword">private</span> <span class="keyword">var</span> modelData <span class="operator">=</span> <span class="type">ModelData</span>()</span><br><span class="line">    <span class="keyword">var</span> body: <span class="keyword">some</span> <span class="type">Scene</span> &#123;</span><br><span class="line">        <span class="type">WindowGroup</span> &#123;</span><br><span class="line">            <span class="type">ContentView</span>()</span><br><span class="line">                    .environmentObject(modelData)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="MainMenu"><a href="#MainMenu" class="headerlink" title="MainMenu"></a>MainMenu</h5><p>MarkList: Mark列表，即展示电影和书籍列表</p>
<p>使用NavigationLink，向子界面：MarkDetail传递mark的引用</p>
<p><img src="README/image-20211027234131178.png" alt="image-20211027234131178"></p>
<p>HomeView: 主界面</p>
<h5 id="Mark"><a href="#Mark" class="headerlink" title="Mark"></a>Mark</h5><p>关于Mark的界面</p>
<p>MarkDetail: 一个Mark的详情</p>
<p>大部分子界面都如此UI一样，引入modelData的环境变量，承接上一级传下来的@Binding变量，实现数据的同步</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnvironmentObject</span> <span class="keyword">var</span> modelData: <span class="type">ModelData</span></span><br><span class="line"><span class="meta">@Binding</span> <span class="keyword">var</span> mark: <span class="type">Mark</span></span><br></pre></td></tr></table></figure>

<p>其中要进行object的解析，如果用户输入能索引本地数据集的一个条目上，将会展示此object的详情</p>
<p><img src="README/image-20211027234003022.png" alt="image-20211027234003022"></p>
<p>MarkAdd: Mark增加界面</p>
<p>MarkEdit: Mark修改界面</p>
<p>MarkToday: 标记今天界面</p>
<p>这三个UI都用到了@State来实时同步Form表单中的信息</p>
<p>以至于用户输入能够及时的反应在变量上并且写入modelData</p>
<p><img src="README/image-20211027234224510.png" alt="image-20211027234224510"></p>
<h4 id="Kit"><a href="#Kit" class="headerlink" title="Kit"></a>Kit</h4><p>其他组件</p>
<p><img src="README/image-20211027234350311.png" alt="image-20211027234350311"></p>
<p>电影和书籍详情，时间线，圆形和方形图片，卡片组件等</p>
<p>均已展示在各个页面中</p>
<h4 id=""><a href="#" class="headerlink" title=""></a></h4></div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="http://pic.mcatk.com/soto-pictures/2021-12/PEqcQi.jpeg" alt="soto"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">soto</p><p class="is-size-6 is-block">多喝水</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Beijing</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">64</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">20</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/acsoto" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/acsoto"><i class="fab fa-github"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-04T15:40:00.000Z">2021-12-04</time></p><p class="title"><a href="/2021/12/04/%E6%95%B0%E5%AD%A6%E5%88%86%E6%9E%90/">数学分析</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-04T07:49:00.000Z">2021-12-04</time></p><p class="title"><a href="/2021/12/04/%E6%8E%A8%E6%AD%8C%20%E7%AC%AC%E4%BA%8C%E6%9C%9F/">推歌 第二期</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-03T14:11:00.000Z">2021-12-03</time></p><p class="title"><a href="/2021/12/03/%E7%94%B5%E5%BD%B1/%E5%81%87%E5%A6%82%E7%88%B1%E6%9C%89%E5%A4%A9%E6%84%8F/">假如爱有天意</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-02T12:48:00.000Z">2021-12-02</time></p><p class="title"><a href="/2021/12/02/%E5%BC%80%E5%8F%91%E5%8D%A1%E7%89%87%E7%9B%92/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BB%BA%E7%AB%8B/">数据库建立</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-12-02T12:24:00.000Z">2021-12-02</time></p><p class="title"><a href="/2021/12/02/%E5%BC%80%E5%8F%91%E5%8D%A1%E7%89%87%E7%9B%92/Django%E7%9B%B8%E5%85%B3/">Django相关</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">December 2021</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/11/"><span class="level-start"><span class="level-item">November 2021</span></span><span class="level-end"><span class="level-item tag">21</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/10/"><span class="level-start"><span class="level-item">October 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/08/"><span class="level-start"><span class="level-item">August 2021</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/06/"><span class="level-start"><span class="level-item">June 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/05/"><span class="level-start"><span class="level-item">May 2021</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">April 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">March 2021</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/01/"><span class="level-start"><span class="level-item">January 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/12/"><span class="level-start"><span class="level-item">December 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">November 2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/10/"><span class="level-start"><span class="level-item">October 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">June 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/01/"><span class="level-start"><span class="level-item">January 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/12/"><span class="level-start"><span class="level-item">December 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/11/"><span class="level-start"><span class="level-item">November 2019</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/09/"><span class="level-start"><span class="level-item">September 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2000/01/"><span class="level-start"><span class="level-item">January 2000</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/AtTackCraft/"><span class="tag">AtTackCraft</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/BUAA/"><span class="tag">BUAA</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MacOS/"><span class="tag">MacOS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MySQL/"><span class="tag">MySQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shell/"><span class="tag">Shell</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Swift/"><span class="tag">Swift</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8D%9A%E9%9B%85/"><span class="tag">博雅</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8F%A4%E5%85%B8%E9%9F%B3%E4%B9%90/"><span class="tag">古典音乐</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%90%90%E6%A7%BD/"><span class="tag">吐槽</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BC%80%E5%8F%91/"><span class="tag">开发</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%84%9F%E6%83%B3/"><span class="tag">感想</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8E%A8%E6%AD%8C/"><span class="tag">推歌</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%94%AF%E6%95%99/"><span class="tag">支教</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%B5%E5%BD%B1/"><span class="tag">电影</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BC%96%E8%AF%91/"><span class="tag">编译</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9A%8F%E6%83%B3/"><span class="tag">随想</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"><span class="tag">面向对象</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%A1%B9%E7%9B%AE/"><span class="tag">项目</span><span class="tag">3</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="SOTO-BLOG" height="28"></a><p class="is-size-7"><span>&copy; 2021 soto</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>